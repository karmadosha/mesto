(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t,n,r){var o=t.name,i=t.link;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=i,this._name=o,this._templateSelector=n,this._handleCardClick=r}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return this._cardElement=document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0),this._cardElement}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardPicture=this._element.querySelector(".element__picture"),this._cardPicture.src=this._link,this._cardPicture.alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._likeButton=this._element.querySelector(".element__like"),this._deleteButton=this._element.querySelector(".element__remove"),this._setEventListeners(),this._element}},{key:"_toggleLike",value:function(){this._likeButton.classList.toggle("element__like_active")}},{key:"_deleteCard",value:function(){this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._toggleLike()})),this._cardPicture.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),this._deleteButton.addEventListener("click",(function(){e._deleteCard()}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscapeClose=this._handleEscapeClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscapeClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}},{key:"_handleEscapeClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-btn"))&&e.close()}))}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===a(o)?o:String(o)),r)}var o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._handleFormSubmit=r,t._form=t._popup.querySelector(".form"),t._inputs=t._form.querySelectorAll(".form__item"),t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputs.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setInputValues",value:function(e){this._inputs.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;p(y(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){p(y(u.prototype),"close",this).call(this),this._form.reset()}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(c);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function S(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(r){var o=h(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,e)});function i(e){var t,n,r,u,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=d(n=o.call(this,e)),l=function(e,r){n._popupImage.src=r,n._popupImage.alt=e,n._popupImageTitle.textContent=e,v((t=d(n),h(i.prototype)),"open",t).call(t)},(u=S(u="open"))in r?Object.defineProperty(r,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[u]=l,n._popupImage=n._popup.querySelector(".popup__image"),n._popupImageTitle=n._popup.querySelector(".popup__image-title"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(c);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var k=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._about=document.querySelector(n)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".form__save-btn",inactiveButtonClass:"form__save-btn_disabled",inputErrorClass:"form__item_type_error",errorClass:"form__error_active"},P=document.querySelector(".popup_type_profile"),O=(document.querySelector(".profile__name"),document.querySelector(".profile__about"),P.querySelector(".form_type_profile")),C=(O.querySelector(".form__item_user_name"),O.querySelector(".form__item_user_about"),document.querySelector(".profile__edit-btn")),L=document.querySelector(".popup_type_new-card"),q=document.querySelector(".profile__add-btn"),I=L.querySelector(".form_type_card"),B=(I.querySelector(".form__item_card_name"),I.querySelector(".form__item_card_about"),document.querySelector(".element-template"),document.querySelector(".popup_type_big-picture"));function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}B.querySelector(".popup__image-title"),B.querySelector(".popup__image"),document.querySelector(".elements"),document.querySelectorAll(".popup");var R=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}},{key:"_enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}},{key:"_toggleSubmitBtnState",value:function(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleSubmitBtnState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitBtnState()}))}))}},{key:"resetValidation",value:function(){var e=this;this._disableSubmitButton(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),V=new R(j,O),A=new R(j,I),D=new g(".popup_type_big-picture"),F=new k(".profile__name",".profile__about"),U=new m({popupSelector:".popup_type_profile",handleFormSubmit:function(e){F.setUserInfo(e),U.close()}}),z=function(e){return new n(e,".element-template",D.open).generateCard()},M=new i({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){M.addItem(z(e))}},".elements"),N=new m({popupSelector:".popup_type_new-card",handleFormSubmit:function(e){M.addItem(z(e)),console.log(e),N.close()}});q.addEventListener("click",(function(){A.resetValidation(),N.open()})),C.addEventListener("click",(function(){V.resetValidation(),U.open(),U.setInputValues(F.getUserInfo())})),D.setEventListeners(),U.setEventListeners(),N.setEventListeners(),M.renderItems(),V.enableValidation(),A.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWtCLG1CQUUxQ3NELEVBQW1CLElBQUloRixFQUFjLENBQ3pDVixjQUFlLHNCQUNmYyxpQkFBa0IsU0FBQzZFLEdBQ2pCRixFQUFTRyxZQUFZRCxHQUNyQkQsRUFBaUJuRixPQUNuQixJQVNJc0YsRUFBYSxTQUFDakcsR0FFbEIsT0FEYSxJQUFJM0MsRUFBTTJDLEVBQU0sb0JBQXFCNEYsRUFBZU0sTUFDckRDLGNBQ2QsRUFFTUMsRUFBVyxJQUFJNUcsRUFBUSxDQUMzQkUsTUZoQzBCLENBQzFCLENBQ0VqQyxLQUFNLFFBQ05DLEtBQU0saUZBRVIsQ0FDRUQsS0FBTSxzQkFDTkMsS0FBTSw2RkFFUixDQUNFRCxLQUFNLFVBQ05DLEtBQU0sa0ZBRVIsQ0FDRUQsS0FBTSxXQUNOQyxLQUFNLG9GQUVSLENBQ0VELEtBQU0scUJBQ05DLEtBQU0sNkZBRVIsQ0FDRUQsS0FBTSxTQUNOQyxLQUFNLGtGRVVSaUMsU0FBVSxTQUFDSyxHQUNUb0csRUFBU0MsUUFBUUosRUFBV2pHLEdBQzlCLEdBQ0MsYUFFR3NHLEVBQWtCLElBQUl4RixFQUFjLENBQ3hDVixjQUFlLHVCQUNmYyxpQkFBa0IsU0FBQ2xCLEdBQ2pCb0csRUFBU0MsUUFBUUosRUFBV2pHLElBQzVCdUcsUUFBUUMsSUFBSXhHLEdBQ1pzRyxFQUFnQjNGLE9BQ2xCLElBR0Y2QyxFQUFjbkUsaUJBQWlCLFNBQVMsV0FDdENzRyxFQUFzQmMsa0JBQ3RCSCxFQUFnQkosTUFDbEIsSUFDQTVDLEVBQWVqRSxpQkFBaUIsU0EvQkgsV0FDM0JxRyxFQUFzQmUsa0JBQ3RCWCxFQUFpQkksT0FDakJKLEVBQWlCWSxlQUFlYixFQUFTYyxjQUMzQyxJQTZCQWYsRUFBZWdCLG9CQUNmZCxFQUFpQmMsb0JBQ2pCTixFQUFnQk0sb0JBRWhCUixFQUFTUyxjQUVUbkIsRUFBc0JvQixtQkFDdEJuQixFQUFzQm1CLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgdGhpcy5fbGluayA9IGxpbms7ICBcclxuICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbn07XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JykuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRQaWN0dXJlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fcGljdHVyZScpO1xyXG4gICAgdGhpcy5fY2FyZFBpY3R1cmUuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRQaWN0dXJlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJyk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19yZW1vdmUnKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZFBpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5fZGVsZXRlQ2FyZCgpXHJcbiAgICB9KTtcclxuICB9ICBcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yICh7IGl0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9O1xyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgXHJcbiAgICB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idG4nKSkge1xyXG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuICB9ICAgIFxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7ICAgIFxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2l0ZW0nKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHsgICAgXHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YU9iaikge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YU9ialtpbnB1dC5uYW1lXTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IFxyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UtdGl0bGUnKTtcclxuICB9XHJcblxyXG4gIG9wZW4gPSAobmFtZSwgbGluaykgPT4ge1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckFib3V0U2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBYm91dFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pdGVtJyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zYXZlLWJ0bicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3NhdmUtYnRuX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pdGVtX3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19lcnJvcl9hY3RpdmUnXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4gIH1cclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9wcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWJvdXQnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1Qcm9maWxlRWRpdCA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX3Byb2ZpbGUnKTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGZvcm1Qcm9maWxlRWRpdC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faXRlbV91c2VyX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGFib3V0SW5wdXQgPSBmb3JtUHJvZmlsZUVkaXQucXVlcnlTZWxlY3RvcignLmZvcm1fX2l0ZW1fdXNlcl9hYm91dCcpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9uZXctY2FyZCcpO1xyXG5leHBvcnQgY29uc3QgbmV3Q2FyZEFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtTmV3Q2FyZCA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX2NhcmQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkTmFtZUlucHV0ID0gZm9ybU5ld0NhcmQucXVlcnlTZWxlY3RvcignLmZvcm1fX2l0ZW1fY2FyZF9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkUGljdHVyZUlucHV0ID0gZm9ybU5ld0NhcmQucXVlcnlTZWxlY3RvcignLmZvcm1fX2l0ZW1fY2FyZF9hYm91dCcpO1xyXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQtdGVtcGxhdGUnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYmlnLXBpY3R1cmUnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VUaXRsZSA9IHBvcHVwSW1hZ2UucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS10aXRsZScpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZVBpY3R1cmUgPSBwb3B1cEltYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb250YWluZXJTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAnKTsiLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnLFxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudCxcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3IsXHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3IsXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcixcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcblx0XHR0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICBcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7ICAgIFxyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVTdWJtaXRCdG5TdGF0ZSgpIHtcclxuICAgIGlmKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRTZWxlY3RvcikgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0U2VsZWN0b3IudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTsgICAgXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVTdWJtaXRCdG5TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0blN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBcclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTsgICAgIFxyXG4gIH07XHJcbiAgXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBjb25maWcsXHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIG5ld0NhcmRBZGRCdG4sXHJcbiAgZm9ybU5ld0NhcmQsXHJcbiAgZm9ybVByb2ZpbGVFZGl0XHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybVByb2ZpbGVFZGl0KTtcclxuY29uc3QgbmV3Q2FyZEZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtTmV3Q2FyZCk7XHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9iaWctcGljdHVyZScpO1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbygnLnByb2ZpbGVfX25hbWUnLCAnLnByb2ZpbGVfX2Fib3V0Jyk7XHJcblxyXG5jb25zdCBwb3B1cFByb2ZpbGVFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9wcm9maWxlJyxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXREYXRhKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dERhdGEpO1xyXG4gICAgcG9wdXBQcm9maWxlRWRpdC5jbG9zZSgpO1xyXG4gIH1cclxufSlcclxuXHJcbmNvbnN0IG9wZW5Qb3B1cFByb2ZpbGVFZGl0ID0gKCkgPT4ge1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwb3B1cFByb2ZpbGVFZGl0Lm9wZW4oKTtcclxuICBwb3B1cFByb2ZpbGVFZGl0LnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG59XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQgKGl0ZW0sICcuZWxlbWVudC10ZW1wbGF0ZScsIHBvcHVwV2l0aEltYWdlLm9wZW4pO1xyXG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICB9LFxyXG59LCAnLmVsZW1lbnRzJyk7XHJcblxyXG5jb25zdCBwb3B1cEFkZE5ld0NhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX25ldy1jYXJkJyxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaXRlbSkgPT4ge1xyXG4gICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xyXG4gICAgcG9wdXBBZGROZXdDYXJkLmNsb3NlKCk7XHJcbiAgfVxyXG59KVxyXG5cclxubmV3Q2FyZEFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBuZXdDYXJkRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcG9wdXBBZGROZXdDYXJkLm9wZW4oKTtcclxufSk7XHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwUHJvZmlsZUVkaXQpO1xyXG5cclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBQcm9maWxlRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEFkZE5ld0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcblxyXG5wcm9maWxlRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5uZXdDYXJkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsIl9yZWYiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2xpbmsiLCJfbmFtZSIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImtleSIsInZhbHVlIiwiX2NhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2NhcmRQaWN0dXJlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfbGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlTGlrZSIsIl9kZWxldGVDYXJkIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJmb3JFYWNoIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY2FwZUNsb3NlIiwiYmluZCIsImFkZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImhhbmRsZUZvcm1TdWJtaXQiLCJjYWxsIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3RoaXMyIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJkYXRhT2JqIiwiX3RoaXMzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl90aGlzU3VwZXIiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZVRpdGxlIiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckFib3V0U2VsZWN0b3IiLCJfYWJvdXQiLCJhYm91dCIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicG9wdXBQcm9maWxlIiwiZm9ybVByb2ZpbGVFZGl0IiwicHJvZmlsZUVkaXRCdG4iLCJwb3B1cEFkZENhcmQiLCJuZXdDYXJkQWRkQnRuIiwiZm9ybU5ld0NhcmQiLCJwb3B1cEltYWdlIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsIl9idXR0b25FbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaW5wdXRFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl90b2dnbGVTdWJtaXRCdG5TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJwcm9maWxlRm9ybVZhbGlkYXRpb24iLCJuZXdDYXJkRm9ybVZhbGlkYXRpb24iLCJwb3B1cFdpdGhJbWFnZSIsInVzZXJJbmZvIiwicG9wdXBQcm9maWxlRWRpdCIsImlucHV0RGF0YSIsInNldFVzZXJJbmZvIiwiY3JlYXRlQ2FyZCIsIm9wZW4iLCJnZW5lcmF0ZUNhcmQiLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJwb3B1cEFkZE5ld0NhcmQiLCJjb25zb2xlIiwibG9nIiwicmVzZXRWYWxpZGF0aW9uIiwic2V0SW5wdXRWYWx1ZXMiLCJnZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVuZGVySXRlbXMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==